<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIT 225 Final Project</title>
    <meta name="description" content="Assignment portal for Hector Olivares Tapia in WDD 230: Web Frontend Development at Brigham Young University - Idaho">
    <link rel="stylesheet" href="styles/normalize.css">
    <link href="styles/small.css" rel="stylesheet">
    <link href="styles/medium.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
</head>
<body>
    <header class="shadowbox">
        <img src="images/HectorOlivaresT.jpg" alt="picture of Hector Olivares Tapia">
        <h1>CIT 225 Database Design & Develelopment</h1>
    </header>
    <main>
        <h2 class="fixCrud">Test cases for all CRUD operations <span><em><a href="index.html">back</a></em></span> </h2>
      <hr>
      <h5>Database creation</h5>
      <pre class="creation"><span style="font-size: 10pt; font-family: Courier;">
-- MySQL Script generated by MySQL Workbench
-- Mon Apr  3 03:04:54 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema ContractService
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ContractService
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ContractService` DEFAULT CHARACTER SET utf8 ;
USE `ContractService` ;

-- -----------------------------------------------------
-- Table `ContractService`.`clients`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`clients` (
  `client_id` INT NOT NULL AUTO_INCREMENT,
  `tag_client` VARCHAR(10) NOT NULL,
  `client_name` VARCHAR(75) NOT NULL,
  PRIMARY KEY (`client_id`),
  UNIQUE INDEX `tag_client_UNIQUE` (`tag_client` ASC) VISIBLE,
  UNIQUE INDEX `client_id_UNIQUE` (`client_id` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`contractor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`contractor` (
  `contractor_id` INT NOT NULL AUTO_INCREMENT,
  `tag_contractor` VARCHAR(15) NOT NULL,
  `contractor_name` VARCHAR(75) NOT NULL,
  PRIMARY KEY (`contractor_id`),
  UNIQUE INDEX `tag_contractor_UNIQUE` (`tag_contractor` ASC) VISIBLE,
  UNIQUE INDEX `contractor_id_UNIQUE` (`contractor_id` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`contracts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`contracts` (
  `contract_id` INT NOT NULL AUTO_INCREMENT,
  `tag_contract` VARCHAR(10) NOT NULL,
  `contract_name` VARCHAR(150) NOT NULL,
  `start_date` DATE NOT NULL,
  `end_date` DATE NOT NULL,
  `value` DOUBLE NOT NULL,
  `client_id` INT NOT NULL,
  `contractor_id` INT NOT NULL,
  PRIMARY KEY (`contract_id`),
  INDEX `fk_contract_client1_idx` (`client_id` ASC) VISIBLE,
  INDEX `fk_contract_contractor1_idx` (`contractor_id` ASC) VISIBLE,
  UNIQUE INDEX `tag_contract_UNIQUE` (`tag_contract` ASC) VISIBLE,
  UNIQUE INDEX `contract_id_UNIQUE` (`contract_id` ASC) VISIBLE,
  CONSTRAINT `fk_contract_client1`
    FOREIGN KEY (`client_id`)
    REFERENCES `ContractService`.`clients` (`client_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_contract_contractor1`
    FOREIGN KEY (`contractor_id`)
    REFERENCES `ContractService`.`contractor` (`contractor_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`concepts`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`concepts` (
  `concept_id` INT NOT NULL AUTO_INCREMENT,
  `tag_concept` VARCHAR(10) NOT NULL,
  `concept_name` VARCHAR(45) NOT NULL,
  `unit` VARCHAR(10) NOT NULL,
  `unit_price` DOUBLE NOT NULL,
  `quantity` DOUBLE NOT NULL,
  `price` DOUBLE NOT NULL,
  `contracts_contract_id` INT NOT NULL,
  PRIMARY KEY (`concept_id`),
  UNIQUE INDEX `tag_concept_UNIQUE` (`tag_concept` ASC) VISIBLE,
  UNIQUE INDEX `concept_id_UNIQUE` (`concept_id` ASC) VISIBLE,
  INDEX `fk_concepts_contracts1_idx` (`contracts_contract_id` ASC) VISIBLE,
  CONSTRAINT `fk_concepts_contracts1`
    FOREIGN KEY (`contracts_contract_id`)
    REFERENCES `ContractService`.`contracts` (`contract_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`areas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`areas` (
  `area_id` INT NOT NULL AUTO_INCREMENT,
  `tag_area` VARCHAR(15) NOT NULL,
  `area_name` VARCHAR(75) NOT NULL,
  `area_city` VARCHAR(20) NULL,
  `client_id` INT NOT NULL,
  PRIMARY KEY (`area_id`),
  UNIQUE INDEX `area_tag_UNIQUE` (`tag_area` ASC) VISIBLE,
  UNIQUE INDEX `area_id_UNIQUE` (`area_id` ASC) VISIBLE,
  INDEX `fk_areas_clients1_idx` (`client_id` ASC) VISIBLE,
  CONSTRAINT `fk_areas_clients1`
    FOREIGN KEY (`client_id`)
    REFERENCES `ContractService`.`clients` (`client_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`client_personnel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`client_personnel` (
  `client_personnel_id` INT NOT NULL AUTO_INCREMENT,
  `tag_client_personnel` VARCHAR(15) NOT NULL,
  `client_personnel_name` VARCHAR(45) NOT NULL,
  `client_personnel_role` VARCHAR(15) NOT NULL,
  `client_id` INT NOT NULL,
  `area_id` INT NOT NULL,
  PRIMARY KEY (`client_personnel_id`),
  INDEX `fk_client_personnel_client1_idx` (`client_id` ASC) VISIBLE,
  UNIQUE INDEX `tag_client_personnel_UNIQUE` (`tag_client_personnel` ASC) VISIBLE,
  UNIQUE INDEX `client_personnel_id_UNIQUE` (`client_personnel_id` ASC) VISIBLE,
  INDEX `fk_client_personnel_areas1_idx` (`area_id` ASC) VISIBLE,
  CONSTRAINT `fk_client_personnel_client1`
    FOREIGN KEY (`client_id`)
    REFERENCES `ContractService`.`clients` (`client_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_client_personnel_areas1`
    FOREIGN KEY (`area_id`)
    REFERENCES `ContractService`.`areas` (`area_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`requests`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`requests` (
  `request_id` INT NOT NULL AUTO_INCREMENT,
  `tag_request` VARCHAR(20) NOT NULL,
  `request_name` VARCHAR(45) NOT NULL,
  `start_date` DATE NOT NULL,
  `end_date` DATE NOT NULL,
  `contract_id` INT NOT NULL,
  `area_id` INT NOT NULL,
  PRIMARY KEY (`request_id`, `area_id`),
  UNIQUE INDEX `tag_order_UNIQUE` (`tag_request` ASC) VISIBLE,
  UNIQUE INDEX `order_id_UNIQUE` (`request_id` ASC) VISIBLE,
  INDEX `fk_orders_contracts1_idx` (`contract_id` ASC) VISIBLE,
  INDEX `fk_requests_areas1_idx` (`area_id` ASC) VISIBLE,
  CONSTRAINT `fk_orders_contracts1`
    FOREIGN KEY (`contract_id`)
    REFERENCES `ContractService`.`contracts` (`contract_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_requests_areas1`
    FOREIGN KEY (`area_id`)
    REFERENCES `ContractService`.`areas` (`area_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`contractor_personnel`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`contractor_personnel` (
  `contractor_personnel_id` INT NOT NULL AUTO_INCREMENT,
  `tag_contractor_personnel` VARCHAR(10) NOT NULL,
  `contractor_personnel_name` VARCHAR(45) NOT NULL,
  `contractor_personnel_role` VARCHAR(45) NOT NULL,
  `contractor_id` INT NOT NULL,
  PRIMARY KEY (`contractor_personnel_id`),
  INDEX `fk_contractor_personnel_contractor1_idx` (`contractor_id` ASC) VISIBLE,
  UNIQUE INDEX `tag_contractor_personnel_UNIQUE` (`tag_contractor_personnel` ASC) VISIBLE,
  UNIQUE INDEX `contractor_personnel_id_UNIQUE` (`contractor_personnel_id` ASC) VISIBLE,
  CONSTRAINT `fk_contractor_personnel_contractor1`
    FOREIGN KEY (`contractor_id`)
    REFERENCES `ContractService`.`contractor` (`contractor_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`generators`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`generators` (
  `request_id` INT NOT NULL,
  `concept_id` INT NOT NULL,
  `quantity` DOUBLE NULL,
  `exec_date` DATE NULL,
  `contractor_personnel_id` INT NOT NULL,
  `client_personnel_id` INT NOT NULL,
  `price` DOUBLE NULL,
  INDEX `fk_generators_requests1_idx` (`request_id` ASC) VISIBLE,
  INDEX `fk_generators_concepts1_idx` (`concept_id` ASC) VISIBLE,
  INDEX `fk_generators_contractor_personnel1_idx` (`contractor_personnel_id` ASC) VISIBLE,
  INDEX `fk_generators_client_personnel1_idx` (`client_personnel_id` ASC) VISIBLE,
  CONSTRAINT `fk_generators_requests1`
    FOREIGN KEY (`request_id`)
    REFERENCES `ContractService`.`requests` (`request_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_generators_concepts1`
    FOREIGN KEY (`concept_id`)
    REFERENCES `ContractService`.`concepts` (`concept_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_generators_contractor_personnel1`
    FOREIGN KEY (`contractor_personnel_id`)
    REFERENCES `ContractService`.`contractor_personnel` (`contractor_personnel_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_generators_client_personnel1`
    FOREIGN KEY (`client_personnel_id`)
    REFERENCES `ContractService`.`client_personnel` (`client_personnel_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ContractService`.`Orders`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ContractService`.`Orders` (
  `request_id` INT NOT NULL,
  `concept_id` INT NOT NULL,
  `quantity` DOUBLE NULL,
  `price` DOUBLE NULL,
  INDEX `fk_Orders_requests1_idx` (`request_id` ASC) VISIBLE,
  INDEX `fk_Orders_concepts1_idx` (`concept_id` ASC) VISIBLE,
  CONSTRAINT `fk_Orders_requests1`
    FOREIGN KEY (`request_id`)
    REFERENCES `ContractService`.`requests` (`request_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Orders_concepts1`
    FOREIGN KEY (`concept_id`)
    REFERENCES `ContractService`.`concepts` (`concept_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
         
      </span>
      </pre> 
      <hr> 
      <h5>Database population</h5>       
      <pre class="crud"><span style="font-size: 10pt; font-family: Courier;">
        <a href="https://webmailbyui-my.sharepoint.com/:x:/g/personal/u948789923_byui_edu/EUftQGV5nVhGtprInprZyRkBSMFNLM1G3GOcdNWqx6vYKA?e=aPsP4W" target="_blank">Here you can see how I created the database tables.</a>
      </span>
      </pre> 
      <hr>  
      <h5>Database insert</h5>         
      <pre class="crud"><span style="font-size: 10pt; font-family: Courier;">
mysql> DESC contracts;
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| contract_id   | int          | NO   | PRI | NULL    | auto_increment |
| tag_contract  | varchar(15)  | NO   | UNI | NULL    |                |
| contract_name | varchar(150) | NO   |     | NULL    |                |
| start_date    | date         | NO   |     | NULL    |                |
| end_date      | date         | NO   |     | NULL    |                |
| value         | double       | NO   |     | NULL    |                |
| client_id     | int          | NO   | MUL | NULL    |                |
| contractor_id | int          | NO   | MUL | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+
8 rows in set (0.01 sec)

mysql> INSERT INTO  contracts
-> (contract_id, tag_contract, contract_name, start_date, end_date, 
-> value, client_id, contractor_id)
-> VALUES
-> ('1', '20210331-01', 'Maintenance & Supply for Jyatt Hotels Southeast region', 
-> '2021/03/31', '2021/12/31', '61000', '1', '1');
1 rows in set (0.01 sec)

mysql> SELECT tag_contract, start_date, end_date FROM contracts;
+--------------+------------+------------+
| tag_contract | start_date | end_date   |
+--------------+------------+------------+
| 20210331-01  | 2021-03-31 | 2021-12-31 |
| 20220325-01  | 2022-03-25 | 2022-12-31 |
| 20220329-02  | 2022-03-29 | 2022-12-31 |
| 20220330-03  | 2022-03-30 | 2022-12-31 |
+--------------+------------+------------+
4 rows in set (0.00 sec)
      </span>
      </pre> 
      <hr>
      <h5>Database update</h5>         
      <pre class="creation"><span style="font-size: 10pt; font-family: Courier;">
mysql> UPDATE generators g
-> SET g.price = (SELECT c.unit_price * g.quantity
-> FROM concepts c
-> WHERE g.concept_id = c.concept_id);
Query OK, 0 rows affected (0.01 sec)
Rows matched: 843  Changed: 0  Warnings: 0

mysql> SELECT c.concept_name, c.unit, c.unit_price,
-> g.quantity, g.price
-> from generators g
-> inner join concepts c
-> on g.concept_id = c.concept_id;

+-------------------------------------+---------+------------+----------+------------+
| concept_name                        | unit    | unit_price | quantity | price      |
+-------------------------------------+---------+------------+----------+------------+
| Cylinder Change (House lock only)   | Service |         15 |        1 |         15 |
| Cylinder Change (House lock only)   | Service |         15 |        4 |         60 |
| Cylinder Change (House lock only)   | Service |         15 |        3 |         45 |
| Cylinder Change (House lock only)   | Service |         15 |        3 |         45 |
| Cylinder Change (House lock only)   | Service |         15 |        1 |         15 |
| Cylinder Change (House lock only)   | Service |         15 |        4 |         60 |
| Replace Apt. door knobs             | Service |         12 |        4 |         48 |
:
:
| Dinette Light Fixture               | Piece   |         36 |        1 |         36 |
| Dinette Light Fixture               | Piece   |         36 |        4 |        144 |
| Floor Tiles                         | Piece   |       2.75 |        2 |        5.5 |
| Floor Tiles                         | Piece   |       2.75 |        1 |       2.75 |
| Floor Tiles                         | Piece   |       2.75 |        4 |         11 |
+-------------------------------------+---------+------------+----------+------------+
843 rows in set (0.01 sec)
      </span>
      </pre> 
      <hr>      
    </main>
    <footer class="shadowbox">
      <div>
            <p>
              &copy; <span id="currentyear"></span> | Hector Olivares Tapia | <strong>BYU</strong> IDAHO
            </p>
            <p>
              <span id="lastupdated"></span>
            </p>
      </div>
    </footer>
  <script src="scripts/scripting.js"></script>
</body>
</html>